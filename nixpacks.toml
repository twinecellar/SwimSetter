[phases.setup]
# Nix's Python is "externally managed" (PEP 668), so avoid `ensurepip` and avoid
# installing into the system site-packages in `/nix/store`.
nixPkgs = [
  "nodejs_20",
  "python311",
  "python311Packages.pip",
]

[phases.install]
# Nix may provide `pip` as a standalone executable (without `python -m pip` being
# available for the base interpreter). Use the `pip` CLI directly.
cmds = ["npm ci", "pip install --user -r requirements.txt"]

[phases.build]
cmds = ["npm run build"]

[start]
cmd = "npm run start"
