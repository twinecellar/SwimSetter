[phases.setup]
# Nix's Python is "externally managed" (PEP 668), so avoid `ensurepip` and avoid
# installing into the system site-packages in `/nix/store`.
nixPkgs = [
  "nodejs_20",
  "python311",
  "python311Packages.pip",
]

[phases.install]
cmds = ["npm ci", "python -m pip install --user -r requirements.txt"]

[phases.build]
cmds = ["npm run build"]

[start]
cmd = "npm run start"
